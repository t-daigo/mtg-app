(function(e){function t(t){for(var r,c,s=t[0],i=t[1],l=t[2],d=0,p=[];d<s.length;d++)c=s[d],a[c]&&p.push(a[c][0]),a[c]=0;for(r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r]);u&&u(t);while(p.length)p.shift()();return o.push.apply(o,l||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],r=!0,s=1;s<n.length;s++){var i=n[s];0!==a[i]&&(r=!1)}r&&(o.splice(t--,1),e=c(c.s=n[0]))}return e}var r={},a={app:0},o=[];function c(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.m=e,c.c=r,c.d=function(e,t,n){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)c.d(n,r,function(t){return e[t]}.bind(null,r));return n},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="t-daigo.github.io/mtg-app/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],i=s.push.bind(s);s.push=t,s=s.slice();for(var l=0;l<s.length;l++)t(s[l]);var u=i;o.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},1:function(e,t){},2:function(e,t){},3:function(e,t){},4:function(e,t){},5:function(e,t){},"56d7":function(e,t,n){"use strict";n.r(t);n("cadf"),n("551c"),n("097d");var r=n("2b0e"),a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"vh-100 bg-light",attrs:{id:"app"}},[n("div",{attrs:{id:"nav"}},[n("nav-bar")],1),n("router-view")],1)},o=[],c=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("nav",{staticClass:"navbar bg-secondary"},[n("router-link",{staticClass:"navbar-brand text-light",attrs:{to:"/"}},[e._v("MtG 今日の一枚")])],1)])},s=[],i={name:"NavBar"},l=i,u=n("2877"),d=Object(u["a"])(l,c,s,!1,null,"1455be8c",null);d.options.__file="NavBar.vue";var p=d.exports,m={components:{NavBar:p}},f=m,h=Object(u["a"])(f,a,o,!1,null,null,null);h.options.__file="App.vue";var v=h.exports,b=n("8c4f"),g=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"vh-100"},[n("div",{staticClass:"container-fluid"},[e._m(0),n("card-info",{attrs:{card:e.getCard,loading:e.isLoading}}),n("div",{staticClass:"row h-25 pt-3"},[n("button",{staticClass:"btn btn-primary btn-lg mx-auto",attrs:{disabled:e.isLoading},on:{click:function(t){e.show()}}},[e._v("show!")])]),n("twitter-button"),n("search-form")],1)])},C=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"row h-25 pt-3"},[n("h1",{staticClass:"mx-auto"},[e._v("MtG 今日の一枚")])])}],_=n("cebc"),y=n("2f62"),w=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"row pt-3"},[e.card?n("card-viewer",{staticClass:"mx-auto",attrs:{card:e.getCard}}):e._e(),n("LoadingSpinner",{directives:[{name:"show",rawName:"v-show",value:e.loading,expression:"loading"}],staticClass:"mx-auto"})],1)},x=[],j=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.card?n("img",{attrs:{src:e.card.imageUrl,alt:e.card.name}}):e._e()])},S=[],O={name:"card-viewer",props:{card:{type:Object}}},E=O,I=Object(u["a"])(E,j,S,!1,null,null,null);I.options.__file="CardViewer.vue";var k=I.exports,A=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},T=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"spinner-border",attrs:{role:"status"}},[n("span",{staticClass:"sr-only"},[e._v("ロード中…")])])}],R={name:"LoadingSpinner"},F=R,$=Object(u["a"])(F,A,T,!1,null,"7d7b107f",null);$.options.__file="LoadingSpinner.vue";var B=$.exports,N={name:"showCardPage",components:{LoadingSpinner:B,CardViewer:k},props:{card:{type:Object},loading:{type:Boolean}},computed:Object(_["a"])({},Object(y["c"])(["getCard"]))},L=N,P=Object(u["a"])(L,w,x,!1,null,null,null);P.options.__file="CardInfo.vue";var M=P.exports,D=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"row pt-3"},[n("div",{staticClass:"col-12"},[n("button",{staticClass:"btn btn-block btn-outline-secondary",attrs:{type:"button","data-toggle":"collapse","data-target":"#searchForm","aria-expanded":"false","aria-controls":"searchForm"}},[e._v("\n      絞り込み条件\n    ")]),n("div",{staticClass:"collapse",attrs:{id:"searchForm"}},[n("div",{staticClass:"card card-body"},[n("form",[n("format-select"),n("type-select"),n("color-checkbox")],1)])])])])},U=[],G=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("BaseSelect",{attrs:{"selector-id":e.selectorId,contents:e.contents},on:{"select-change":e.setFormat}},[e._v("\n  フォーマット\n")])},J=[],q=n("db0c"),V=n.n(q),H=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"form-group"},[n("label",{attrs:{for:e.selectorId}},[e._t("default")],2),n("select",{staticClass:"form-control",attrs:{id:e.selectorId},on:{change:e.selectChange}},e._l(e.contents,function(t,r){return n("option",{key:r,domProps:{value:t.param}},[e._v("\n      "+e._s(t.name)+"\n    ")])}),0)])},K=[],W={name:"BaseSelect",props:{selectorId:{type:String,required:!0},contents:{type:Array,required:!0}},methods:{selectChange:function(e){this.$emit("select-change",e.target.value)}}},Y=W,z=Object(u["a"])(Y,H,K,!1,null,"1ad4f346",null);z.options.__file="BaseSelect.vue";var Q=z.exports,X={STANDARD:{name:"スタンダード",param:"Standard"},MODERN:{name:"モダン",param:"Modern"},LEGACY:{name:"レガシー",param:"Legacy"},VINTAGE:{name:"ヴィンテージ",param:"Vintage"},COMMANDER:{name:"統率者",param:"Commander"}},Z={DEFAULT:{name:"全て",param:""},LAND:{name:"土地",param:"Land"},CREATURE:{name:"クリーチャー",param:"Creature"},ENCHANT:{name:"エンチャント",param:"Enchant"},ARTIFACT:{name:"アーティファクト",param:"Artifact"},INSTANT:{name:"インスタント",param:"Instant"},SORCERY:{name:"ソーサリー",param:"Sorcery"},TRIBAL:{name:"部族",param:"Tribal"},PLANESWALKER:{name:"プレインズウォーカー",param:"Planeswalker"}},ee={WHITE:{name:"白",param:"white"},BLUE:{name:"青",param:"blue"},BLACK:{name:"黒",param:"black"},RED:{name:"赤",param:"red"},GREEN:{name:"緑",param:"green"}},te={name:"FormatSelect",components:{BaseSelect:Q},data:function(){return{selectorId:"format-select",contents:V()(X)}},methods:{setFormat:function(e){this.$store.commit("setFormat",e)}}},ne=te,re=Object(u["a"])(ne,G,J,!1,null,"6dc87b9b",null);re.options.__file="FormatSelect.vue";var ae=re.exports,oe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("BaseSelect",{attrs:{"selector-id":e.selectorId,contents:e.contents},on:{"select-change":e.setTypes}},[e._v("\n  カードタイプ\n")])},ce=[],se={name:"TypeSelect",components:{BaseSelect:Q},data:function(){return{selectorId:"type-select",contents:V()(Z)}},methods:{setTypes:function(e){this.$store.commit("setTypes",e)}}},ie=se,le=Object(u["a"])(ie,oe,ce,!1,null,"a6e1c3a2",null);le.options.__file="TypeSelect.vue";var ue=le.exports,de=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e._l(e.contents,function(t,r){return n("base-checkbox",{key:r,attrs:{"selector-id":e.selectorId+t.param,content:t},on:{"box-checked":e.setColors}})}),n("div",[n("base-checkbox",{attrs:{"selector-id":e.selectorId+"flg",content:e.andFlag},on:{"box-checked":e.setAndFlag}})],1)],2)},pe=[],me=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"form-check form-check-inline"},[n("input",{staticClass:"form-check-input",attrs:{type:"checkbox",id:e.selectorId},domProps:{value:e.content.param},on:{change:e.selected}}),n("label",{staticClass:"form-check-label",attrs:{for:e.selectorId}},[e._v("\n    "+e._s(e.content.name)+"\n  ")])])},fe=[],he={name:"BaseCheckbox",props:{selectorId:{type:String,required:!0},content:{type:Object,required:!0}},methods:{selected:function(e){this.$emit("box-checked",e.target.value)}}},ve=he,be=Object(u["a"])(ve,me,fe,!1,null,"d47a5bdc",null);be.options.__file="BaseCheckbox.vue";var ge=be.exports,Ce={name:"ColorCheckbox",components:{BaseCheckbox:ge},data:function(){return{selectorId:"color-checkbox",contents:V()(ee),andFlag:{name:"AND検索（デフォルトはOR検索)",param:!1}}},methods:{setColors:function(e){this.$store.dispatch("buildColorsParam",e)},setAndFlag:function(e){this.$store.commit("setIsColorSearchAnd",e)}}},_e=Ce,ye=Object(u["a"])(_e,de,pe,!1,null,"53a66bc0",null);ye.options.__file="ColorCheckbox.vue";var we=ye.exports,xe={name:"SearchForm",components:{ColorCheckbox:we,TypeSelect:ue,FormatSelect:ae}},je=xe,Se=Object(u["a"])(je,D,U,!1,null,"494ac869",null);Se.options.__file="SearchForm.vue";var Oe=Se.exports,Ee=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"text-right"},[n("a",{staticClass:"btn btn-primary btn-sm",attrs:{href:e.twUrl,target:"_blank"}},[e._v("\n    ツイート\n  ")])])},Ie=[],ke=(n("7f7f"),{name:"TwitterButton",computed:{twUrl:function(){var e,t=encodeURIComponent(location.href),n=this.$store.getters.getCard,r=encodeURIComponent("MtG今日の一枚");return e=n?"今日のカードは<<".concat(n.name,">>です！"):"どんなカードが見つかるかな？",e=encodeURIComponent(e),"https://twitter.com/intent/tweet?text=".concat(e,"&hashtag=").concat(r,"&url=").concat(t)}}}),Ae=ke,Te=Object(u["a"])(Ae,Ee,Ie,!1,null,"3e2da795",null);Te.options.__file="TwitterButton.vue";var Re=Te.exports,Fe={name:"TopPage",components:{TwitterButton:Re,SearchForm:Oe,CardInfo:M},data:function(){return{loading:!1}},computed:Object(_["a"])({},Object(y["c"])(["getCard"]),{isLoading:function(){return this.loading}}),methods:Object(_["a"])({},Object(y["b"])(["fetchRandomCard"]),{show:function(){var e=this;this.loading=!0,this.fetchRandomCard().then(function(){e.loading=!1})}})},$e=Fe,Be=Object(u["a"])($e,g,C,!1,null,"2a6d9ed4",null);Be.options.__file="TopPage.vue";var Ne=Be.exports;r["a"].use(b["a"]);var Le=new b["a"]({routes:[{path:"/",name:"home",component:Ne}]}),Pe=(n("6762"),n("2fdb"),n("7514"),n("96cf"),n("3b8d")),Me=n("75fc"),De=n("f560"),Ue=n.n(De),Ge=n("a7b2"),Je={fetchRandomCard:function(){var e=Object(Pe["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Ge.card.where(Object(_["a"])({},t,{pageSize:10,random:!0})).then(function(e){if(0===e.length)throw new Error("検索結果が0件です");var t=Ue()(e);return t.find(function(e){return!e.supertypes.includes("Basic")&&e.imageUrl})}).catch(function(e){return console.error(e),null}));case 1:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()};r["a"].use(y["a"]);var qe=new y["a"].Store({state:{card:null,jpnCard:null,gameFormat:X.STANDARD.param,types:"",colors:[],isColorSearchAnd:!1},mutations:{setCardInfo:function(e,t){e.card=t},setJpnCardInfo:function(e,t){e.jpnCard=t},setFormat:function(e,t){e.gameFormat=t},setTypes:function(e,t){e.types=t},setColors:function(e,t){e.colors=[].concat(Object(Me["a"])(e.colors),[t]),console.log(e.colors)},removeColors:function(e,t){e.colors=e.colors.filter(function(e){return e!==t})},setIsColorSearchAnd:function(e,t){e.isColorSearchAnd=t}},actions:{fetchRandomCard:function(){var e=Object(Pe["a"])(regeneratorRuntime.mark(function e(t){var n,r,a,o;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=t.commit,r=t.state,n("setCardInfo",null),n("setJpnCardInfo",null),a=r.isColorSearchAnd?r.colors.join():r.colors.join("|"),o={gameFormat:r.gameFormat,types:r.types,colors:a},e.abrupt("return",Je.fetchRandomCard(o).then(function(e){n("setCardInfo",e);var t=e.foreignNames.find(function(e){return"Japanese"===e.language});n("setJpnCardInfo",t)}).catch(function(){alert("APIエラー")}));case 6:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),buildColorsParam:function(e,t){var n=e.commit,r=e.state;r.colors.includes(t)?n("removeColors",t):n("setColors",t)}},getters:{getCard:function(e){return e.jpnCard?e.jpnCard:e.card}}});n("4989"),n("ab8b");r["a"].config.productionTip=!1,new r["a"]({router:Le,store:qe,render:function(e){return e(v)}}).$mount("#app")}});
//# sourceMappingURL=app.e1215aa9.js.map